<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ajax</title>
</head>
<body>
<div id="new"></div>
</body>
<script>
    function addLoadEvent(func) {
        let oldonload = window.onload;
        if (typeof window.onload !="function"){
            window.onload = func;
        } else {
            window.onload =function () {
                oldonload();
                func();
            }
        }
    }

    function getNewContent() {
        let request = new XMLHttpRequest();
        if (request) {
            request.open("get","text.txt",true);
            request.onreadystatechange = function () {
                if (request.readyState == 4) {
                    alert("Response");
                    let para =document.createElement("p");
                    let txt =document.createTextNode(request.responseText);
                    para.appendChild(txt);
                    document.getElementById("new").appendChild(para);
                }
            };
            request.send(null);
        } else {
            alert("sorry");
        }
        alert("hahaha");
    }
    addLoadEvent(getNewContent);
</script>
</html>